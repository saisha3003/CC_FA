<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lost & Found Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1149.0.min.js"></script>
    
    <style>
        /* --- Inline CSS --- */
        [data-page] { display: none; }
        [data-page="login"] { display: grid; }
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #fff;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .tab-active {
            background-color: #4f46e5; /* indigo-600 */
            color: white;
            font-weight: 600;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <div id="app">

        <main id="loginPage" data-page="login" class="min-h-screen grid md:grid-cols-2">
            <div class="hidden md:flex flex-col justify-center bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-12">
                <h1 class="text-5xl font-bold mb-4">Lost & Found</h1>
                <p class="text-xl text-indigo-200 mb-8">Helping you reunite with your lost items.</p>
                <div class="space-y-6 text-indigo-100">
                    <div>
                        <h3 class="font-semibold text-lg mb-2">Find or Post:</h3>
                        <ul class="list-disc list-inside space-y-2">
                            <li>Easily post a lost item.</li>
                            <li>Search for items you've found.</li>
                            <li>Connect with the community.</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="flex flex-col justify-center items-center bg-white p-8 md:p-12">
                <div class="w-full max-w-md">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Welcome!</h2>
                    <form id="loginForm" class="space-y-6">
                        <div>
                            <label for="loginEmail" class="block text-sm font-medium text-gray-700">Email</label>
                            <input type="email" id="loginEmail" required class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                        <div>
                            <label for="loginPassword" class="block text-sm font-medium text-gray-700">Password</label>
                            <input type="password" id="loginPassword" required class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                        <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Log In
                        </button>
                    </form>
                    <p class="mt-6 text-center text-sm text-gray-600">
                        Donâ€™t have an account?
                        <a href="#" id="navigateToSignup" class="font-medium text-indigo-600 hover:text-indigo-500">Sign Up</a>
                    </p>
                </div>
            </div>
        </main>
        
        <main id="signupPage" data-page="signup" class="min-h-screen grid md:grid-cols-2">
            <div class="hidden md:flex flex-col justify-center bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-12">
                <h1 class="text-5xl font-bold mb-4">Lost & Found</h1>
                <p class="text-xl text-indigo-200 mb-8">Join the community and help reunite people with their belongings.</p>
                <div class="space-y-6 text-indigo-100">
                    <div>
                        <h3 class="font-semibold text-lg mb-2">Getting Started is Easy:</h3>
                        <ul class="list-disc list-inside space-y-2">
                            <li>Create a profile in under a minute.</li>
                            <li>Post items you have found.</li>
                            <li>Search for your lost possessions.</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="flex flex-col justify-center items-center bg-white p-8 md:p-12">
                <div class="w-full max-w-md">
                    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Create Your Account</h2>
                    <form id="signupForm" class="space-y-5">
                        <div>
                            <label for="signupName" class="block text-sm font-medium text-gray-700">Your Name</label>
                            <input type="text" id="signupName" required class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                        <div>
                            <label for="signupEmail" class="block text-sm font-medium text-gray-700">Email Address</label>
                            <input type="email" id="signupEmail" required class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                        <div>
                            <label for="signupPassword" class="block text-sm font-medium text-gray-700">Password</label>
                            <input type="password" id="signupPassword" required minlength="6" class="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                        <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            Sign Up
                        </button>
                    </form>
                    <p class="mt-6 text-center text-sm text-gray-600">
                        Already have an account?
                        <a href="#" id="navigateToLogin" class="font-medium text-indigo-600 hover:text-indigo-500">Log In</a>
                    </p>
                </div>
            </div>
        </main>
        
        <main id="itemsPage" data-page="items" class="bg-gray-50 min-h-screen">
            <header class="bg-white shadow-md sticky top-0 z-10">
                <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
                    <div>
                        <h1 id="welcomeUserName" class="text-2xl font-bold text-gray-800"></h1>
                        <p id="welcomeUserEmail" class="text-sm text-gray-500"></p>
                    </div>
                    <div>
                        <button id="openItemModalBtn" class="mr-4 inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
                            Post New Item
                        </button>
                        <button id="logoutButton" class="inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-200">
                            Logout
                        </button>
                    </div>
                </nav>
            </header>
            
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="mb-6 bg-white p-2 rounded-lg shadow-md flex space-x-2">
                    <button data-tab="lost" class="item-tab flex-1 text-center px-4 py-2 rounded-md transition-colors duration-200">Lost Items</button>
                    <button data-tab="found" class="item-tab flex-1 text-center px-4 py-2 rounded-md transition-colors duration-200">Found Items</button>
                    <button data-tab="my" class="item-tab flex-1 text-center px-4 py-2 rounded-md transition-colors duration-200">My Items</button>
                </div>

                <div>
                    <h2 id="itemListHeader" class="text-2xl font-bold text-gray-900 mb-6">Lost Items</h2>
                    <div id="itemList" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <p class="col-span-full text-center text-gray-500">Loading items from S3...</p>
                    </div>
                </div>
            </div>
        </main>

        <div id="itemModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden items-center justify-center p-4">
            <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-full overflow-y-auto">
                <div class="p-6 border-b flex justify-between items-center">
                    <h2 id="modalTitle" class="text-xl font-semibold text-gray-800">Post a New Item</h2>
                    <button id="closeItemModalBtn" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
                </div>
                <form id="itemForm" class="p-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <input type="hidden" id="itemId">
                    <div class="md:col-span-2">
                        <label for="itemType" class="block text-sm font-medium text-gray-700">Type</label>
                        <select id="itemType" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                            <option value="lost">Lost</option>
                            <option value="found">Found</option>
                        </select>
                    </div>
                    <div class="md:col-span-2">
                        <label for="itemName" class="block text-sm font-medium text-gray-700">Item Name</label>
                        <input type="text" id="itemName" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                    </div>
                    <div class="md:col-span-2">
                        <label for="itemDescription" class="block text-sm font-medium text-gray-700">Description</label>
                        <textarea id="itemDescription" rows="3" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm"></textarea>
                    </div>
                    <div>
                        <label for="itemDate" class="block text-sm font-medium text-gray-700">Date</label>
                        <input type="date" id="itemDate" required class="mt-1 block w-full border-gray-300 rounded-md shadow-sm">
                    </div>
                    <div>
                        <label for="itemImages" class="block text-sm font-medium text-gray-700">Item Images</label>
                        <input type="file" id="itemImages" multiple accept="image/*" class="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-indigo-50 file:text-indigo-600 hover:file:bg-indigo-100">
                        <p class="text-xs text-gray-500 mt-1">For updates, selecting new images will replace old ones.</p>
                    </div>
                    <div class="md:col-span-2 text-right">
                        <button type="submit" class="inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700">
                            <span id="saveItemBtnText">Save Item</span>
                            <div id="saveItemSpinner" class="loading-spinner hidden"></div>
                        </button>
                    </div>
                </form>
            </div>
        </div>

    </div>

    <script>
    class ItemManager {
        constructor() {
            // --- AWS S3 Configuration ---
            const AWS_CONFIG = {
                region: 'eu-north-1', // e.g., 'us-east-1'
                accessKeyId: 'AKIA36UVB2U4VSIHU36S',
                secretAccessKey: 'U2zJNQwIvtaRTjrlXkqYMTE9sv4GxKvL6gMqOdc6',
                bucketName: 'adityaccfa'
            };

            this.AWS_CONFIG = AWS_CONFIG;
            this.s3 = this.initializeS3();

            // --- DOM Element References ---
            this.pages = { login: document.getElementById('loginPage'), signup: document.getElementById('signupPage'), items: document.getElementById('itemsPage') };
            this.loginForm = document.getElementById('loginForm');
            this.signupForm = document.getElementById('signupForm');
            this.navigateToSignup = document.getElementById('navigateToSignup');
            this.navigateToLogin = document.getElementById('navigateToLogin');
            this.logoutButton = document.getElementById('logoutButton');
            this.itemList = document.getElementById('itemList');
            this.welcomeUserName = document.getElementById('welcomeUserName');
            this.welcomeUserEmail = document.getElementById('welcomeUserEmail');
            this.itemModal = document.getElementById('itemModal');
            this.openItemModalBtn = document.getElementById('openItemModalBtn');
            this.closeItemModalBtn = document.getElementById('closeItemModalBtn');
            this.itemForm = document.getElementById('itemForm');
            this.modalTitle = document.getElementById('modalTitle');
            this.itemTabs = document.querySelectorAll('.item-tab');
            this.itemListHeader = document.getElementById('itemListHeader');

            // --- State Management ---
            this.currentUser = null;
            this.allFetchedItems = [];
            this.activeTab = 'lost';

            this.bindEventListeners();
            this.showPage('login');
        }

        initializeS3() {
            if (this.AWS_CONFIG.accessKeyId !== 'YOUR_IAM_USER_ACCESS_KEY_ID') {
                AWS.config.update({
                    region: this.AWS_CONFIG.region,
                    accessKeyId: this.AWS_CONFIG.accessKeyId,
                    secretAccessKey: this.AWS_CONFIG.secretAccessKey
                });
                return new AWS.S3({ apiVersion: '2006-03-01' });
            }
            console.warn("AWS S3 credentials are not configured.");
            return null;
        }

        bindEventListeners() {
            this.navigateToSignup.addEventListener('click', (e) => { e.preventDefault(); this.showPage('signup'); });
            this.navigateToLogin.addEventListener('click', (e) => { e.preventDefault(); this.showPage('login'); });
            this.loginForm.addEventListener('submit', (e) => this.handleLogin(e));
            this.signupForm.addEventListener('submit', (e) => this.handleSignup(e));
            this.logoutButton.addEventListener('click', () => this.handleLogout());
            this.openItemModalBtn.addEventListener('click', () => this.openItemModal());
            this.closeItemModalBtn.addEventListener('click', () => this.closeItemModal());
            this.itemModal.addEventListener('click', (e) => { if(e.target === this.itemModal) this.closeItemModal(); });
            this.itemForm.addEventListener('submit', (e) => this.handleSaveItem(e));
            this.itemTabs.forEach(tab => tab.addEventListener('click', (e) => this.handleTabClick(e)));
        }

        showPage(pageName) {
            Object.values(this.pages).forEach(page => page.style.display = 'none');
            if (this.pages[pageName]) {
                const isGridLayout = this.pages[pageName].classList.contains('grid');
                this.pages[pageName].style.display = isGridLayout ? 'grid' : 'block';
            }
        }

        // --- Modal & Form Logic ---
        openItemModal(itemId = null) {
            this.itemForm.reset();
            document.getElementById('itemId').value = '';
            if (itemId) {
                const item = this.allFetchedItems.find(e => e.id === itemId);
                if (item) {
                    this.modalTitle.textContent = "Edit Item";
                    document.getElementById('itemId').value = item.id;
                    document.getElementById('itemType').value = item.type;
                    document.getElementById('itemName').value = item.itemName;
                    document.getElementById('itemDescription').value = item.description;
                    document.getElementById('itemDate').value = item.date;
                }
            } else {
                this.modalTitle.textContent = "Post a New Item";
            }
            this.itemModal.classList.remove('hidden');
            this.itemModal.classList.add('flex');
        }
        
        closeItemModal() {
            this.itemModal.classList.add('hidden');
            this.itemModal.classList.remove('flex');
            this.itemForm.reset();
        }

        // --- Authentication ---
        handleSignup(e) {
            e.preventDefault();
            const userName = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim().toLowerCase();
            const password = document.getElementById('signupPassword').value;
            if (!userName || !email || !password) return alert('Please fill all fields.');
            const users = JSON.parse(localStorage.getItem('lostAndFoundUsers')) || [];
            if (users.find(user => user.email === email)) return alert('An account with this email already exists.');
            users.push({ userName, email, password });
            localStorage.setItem('lostAndFoundUsers', JSON.stringify(users));
            alert('Signup successful! Please log in.');
            this.showPage('login');
        }

        handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value.trim().toLowerCase();
            const password = document.getElementById('loginPassword').value;
            const users = JSON.parse(localStorage.getItem('lostAndFoundUsers')) || [];
            const user = users.find(u => u.email === email && u.password === password);
            if (user) {
                this.currentUser = user;
                this.initializeAppForUser();
            } else {
                alert('Invalid email or password.');
            }
        }
        
        handleLogout() {
            this.currentUser = null;
            this.allFetchedItems = [];
            this.itemList.innerHTML = '';
            this.showPage('login');
        }

        initializeAppForUser() {
            this.welcomeUserName.textContent = `Welcome, ${this.currentUser.userName}`;
            this.welcomeUserEmail.textContent = this.currentUser.email;
            this.showPage('items');
            this.setActiveTab('lost');
            this.fetchAllItems();
        }

        // --- Tab Logic ---
        handleTabClick(e) {
            this.setActiveTab(e.target.dataset.tab);
            this.renderItems();
        }
        
        setActiveTab(tabName) {
            this.activeTab = tabName;
            const headers = { lost: "Lost Items", found: "Found Items", my: "My Items" };
            this.itemListHeader.textContent = headers[tabName];
            this.itemTabs.forEach(tab => tab.classList.toggle('tab-active', tab.dataset.tab === tabName));
        }

        // --- Item CRUD Operations ---
        async handleSaveItem(e) {
            e.preventDefault();
            if (!this.s3) return alert("S3 is not configured.");
            
            const itemId = document.getElementById('itemId').value;
            const itemType = document.getElementById('itemType').value;
            const itemName = document.getElementById('itemName').value.trim();
            const itemDescription = document.getElementById('itemDescription').value.trim();
            const itemDate = document.getElementById('itemDate').value;
            const newImages = document.getElementById('itemImages').files;
            
            if (!itemName || !itemDescription || !itemDate) return alert("Please fill all item details.");
            
            this.toggleSpinner(true);
            
            try {
                let existingItem = null;
                let imageKeys = [];
                
                if (itemId) { // UPDATE logic
                    existingItem = this.allFetchedItems.find(e => e.id === itemId);
                    imageKeys = existingItem.imageKeys || [];
                    
                    if (newImages.length > 0 && imageKeys.length > 0) {
                        await this.deleteImagesFromS3(imageKeys);
                        imageKeys = []; // Clear the old keys
                    }
                }
                
                if (newImages.length > 0) {
                    const uploadedKeys = await this.uploadImagesToS3(newImages, itemName);
                    imageKeys.push(...uploadedKeys);
                }

                const itemData = {
                    id: itemId || `item_${Date.now()}`,
                    itemType,
                    itemName,
                    description: itemDescription,
                    date: itemDate,
                    imageKeys,
                    postedBy: this.currentUser.email,
                    posterName: this.currentUser.userName,
                };

                if (itemId) { // Replace existing item
                    const index = this.allFetchedItems.findIndex(e => e.id === itemId);
                    this.allFetchedItems[index] = itemData;
                } else { // Add new item
                    this.allFetchedItems.push(itemData);
                }

                await this.updateItemsOnS3();
                alert(`Item ${itemId ? 'updated' : 'posted'} successfully!`);
                this.closeItemModal();
                this.renderItems();

            } catch (error) {
                console.error("Error saving item:", error);
                alert("Failed to save item.");
            } finally {
                this.toggleSpinner(false);
            }
        }

        async handleDeleteClick(itemId) {
            if (!confirm("Are you sure you want to delete this item? This action cannot be undone.")) return;
            
            try {
                const itemToDelete = this.allFetchedItems.find(e => e.id === itemId);
                
                if (itemToDelete && itemToDelete.imageKeys && itemToDelete.imageKeys.length > 0) {
                    await this.deleteImagesFromS3(itemToDelete.imageKeys);
                }

                this.allFetchedItems = this.allFetchedItems.filter(e => e.id !== itemId);

                await this.updateItemsOnS3();
                
                alert("Item deleted successfully.");
                this.renderItems();

            } catch (error) {
                console.error("Error deleting item:", error);
                alert("Failed to delete item.");
            }
        }

        async fetchAllItems() {
            if (!this.s3) {
                this.itemList.innerHTML = `<p class="col-span-full text-center text-red-500">S3 is not configured.</p>`;
                return;
            }
            this.itemList.innerHTML = `<p class="col-span-full text-center text-gray-500">Fetching items from S3...</p>`;
            try {
                const data = await this.s3.getObject({ Bucket: this.AWS_CONFIG.bucketName, Key: 'lost_found.json' }).promise();
                this.allFetchedItems = JSON.parse(data.Body.toString('utf-8'));
                this.renderItems();
            } catch (err) {
                if (err.code === 'NoSuchKey') {
                    this.allFetchedItems = [];
                    this.renderItems();
                } else {
                    console.error("Error fetching items:", err);
                    this.itemList.innerHTML = `<p class="col-span-full text-center text-red-500">Failed to load items.</p>`;
                }
            }
        }

        renderItems() {
            let filteredItems = [];
            
            if (this.activeTab === 'lost') {
                filteredItems = this.allFetchedItems.filter(item => item.itemType === 'lost');
            } else if (this.activeTab === 'found') {
                filteredItems = this.allFetchedItems.filter(item => item.itemType === 'found');
            } else if (this.activeTab === 'my') {
                filteredItems = this.allFetchedItems.filter(item => item.postedBy === this.currentUser.email);
            }
            
            if (filteredItems.length === 0) {
                this.itemList.innerHTML = `<p class="col-span-full text-center text-gray-600">No items found in this category.</p>`;
                return;
            }
            
            filteredItems.sort((a, b) => new Date(b.date) - new Date(a.date));
            this.itemList.innerHTML = filteredItems.map(item => this.createItemCard(item)).join('');
        }

        createItemCard(item) {
            const imageUrls = (item.imageKeys || []).map(key => this.s3.getSignedUrl('getObject', { Bucket: this.AWS_CONFIG.bucketName, Key: key, Expires: 3600 }));
            const imagesHtml = imageUrls.length > 0 ?
                `<div class="mt-4 grid grid-cols-2 gap-2">
                    ${imageUrls.slice(0, 4).map(url => `<img src="${url}" alt="Item image" class="w-full h-24 object-cover rounded-md">`).join('')}
                </div>` : '';
            
            const actionButtons = this.activeTab === 'my' ? `
                <div class="mt-4 pt-4 border-t flex space-x-2">
                    <button onclick="app.openItemModal('${item.id}')" class="flex-1 text-sm bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600">Edit</button>
                    <button onclick="app.handleDeleteClick('${item.id}')" class="flex-1 text-sm bg-red-500 text-white py-2 px-4 rounded-md hover:bg-red-600">Delete</button>
                </div>` : '';

            const itemTypeColor = item.itemType === 'lost' ? 'text-red-600' : 'text-green-600';

            return `
                <div class="bg-white p-6 rounded-lg shadow-lg flex flex-col">
                    <div class="flex-grow">
                        <div class="flex justify-between items-start">
                            <h3 class="text-xl font-bold text-gray-900">${item.itemName}</h3>
                            <p class="text-sm text-gray-600 font-semibold flex-shrink-0 ml-2">${new Date(item.date).toLocaleDateString()}</p>
                        </div>
                        <p class="text-sm font-medium ${itemTypeColor} mt-1">${item.itemType === 'lost' ? 'Lost' : 'Found'} by ${item.posterName}</p>
                        <p class="text-gray-700 mt-2 text-sm">${item.description}</p>
                        ${imagesHtml}
                    </div>
                    ${actionButtons}
                </div>`;
        }

        // --- S3 Helper Functions ---
        async uploadImagesToS3(files, itemName) {
            const safeUserName = this.currentUser.userName.replace(/\s+/g, '-').toLowerCase();
            const safeItemName = itemName.replace(/\s+/g, '-').toLowerCase();
            const uploadPromises = [];

            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const key = `items/${safeUserName}_${safeItemName}_${Date.now()}_${i}.${file.name.split('.').pop()}`;
                uploadPromises.push(this.s3.upload({ Bucket: this.AWS_CONFIG.bucketName, Key: key, Body: file, ContentType: file.type }).promise());
            }

            const results = await Promise.all(uploadPromises);
            return results.map(result => result.Key);
        }

        async deleteImagesFromS3(keys) {
            if (!keys || keys.length === 0) return;
            const objects = keys.map(key => ({ Key: key }));
            await this.s3.deleteObjects({ Bucket: this.AWS_CONFIG.bucketName, Delete: { Objects: objects } }).promise();
        }
        
        async updateItemsOnS3() {
            await this.s3.putObject({
                Bucket: this.AWS_CONFIG.bucketName,
                Key: 'lost_found.json',
                Body: JSON.stringify(this.allFetchedItems, null, 2),
                ContentType: 'application/json'
            }).promise();
        }
        
        // --- UI Helpers ---
        toggleSpinner(isLoading) {
            const btnText = document.getElementById('saveItemBtnText');
            const spinner = document.getElementById('saveItemSpinner');
            document.getElementById('itemForm').querySelector('button[type="submit"]').disabled = isLoading;
            btnText.classList.toggle('hidden', isLoading);
            spinner.classList.toggle('hidden', !isLoading);
        }
    }

    window.app = new ItemManager();
    </script>

</body>
</html>
